Dashboard = {

	productVisibility: [
		{ label: "Foreign", value: 1725952},
		{ label: "Unknown", value: 163840},
		{ label: "Coke Can", value: 262144},
		{ label: "Diet Coke Can", value: 8448},
		{ label: "Sprite Can", value: 10752},
		{ label: "Cherry Coke Can", value: 433664},
		{ label: "Cherry Coke Bottle", value: 32768},
		{ label: "Coke Bottle", value: 393216},
		{ label: "Coke Can Large", value: 352000},
		{ label: "Dasani Water", value: 25088 }
	],

	productByZone: [
		{ Zone: "Zone1", ProductId: 0, Product: "Foreign", Qty: 655770},
		{ Zone: "Zone1", ProductId: 10, Product: "Cherry Coke Bottle", Qty: 12452},
		{ Zone: "Zone1", ProductId: 9, Product: "Cherry Coke Can", Qty: 169134},
		{ Zone: "Zone1", ProductId: 11, Product: "Coke Bottle", Qty: 149424},
		{ Zone: "Zone1", ProductId: 2, Product: "Coke Can", Qty: 99616},
		{ Zone: "Zone1", ProductId: 12, Product: "Coke Can Large", Qty: 133683},
		{ Zone: "Zone1", ProductId: 15, Product: "Dasani Water", Qty: 5194},
		{ Zone: "Zone1", ProductId: 3, Product: "Diet Coke Can", Qty: 3289},
		{ Zone: "Zone1", ProductId: 4, Product: "Sprite Can", Qty: 4186},
		{ Zone: "Zone1", ProductId: 1, Product: "Unknown", Qty: 62260},
		{ Zone: "Zone2", ProductId: 0, Product: "Foreign", Qty: 255571},
		{ Zone: "Zone2", ProductId: 10, Product: "Cherry Coke Bottle", Qty: 4839},
		{ Zone: "Zone2", ProductId: 9, Product: "Cherry Coke Can", Qty: 62972},
		{ Zone: "Zone2", ProductId: 11, Product: "Coke Bottle", Qty: 58068},
		{ Zone: "Zone2", ProductId: 2, Product: "Coke Can", Qty: 38712},
		{ Zone: "Zone2", ProductId: 12, Product: "Coke Can Large", Qty: 52525},
		{ Zone: "Zone2", ProductId: 15, Product: "Dasani Water", Qty: 4774},
		{ Zone: "Zone2", ProductId: 3, Product: "Diet Coke Can", Qty: 704},
		{ Zone: "Zone2", ProductId: 4, Product: "Sprite Can", Qty: 896},
		{ Zone: "Zone2", ProductId: 1, Product: "Unknown", Qty: 24195},
		{ Zone: "Zone3", ProductId: 0, Product: "Foreign", Qty: 151337},
		{ Zone: "Zone3", ProductId: 10, Product: "Cherry Coke Bottle", Qty: 2857},
		{ Zone: "Zone3", ProductId: 9, Product: "Cherry Coke Can", Qty: 37184},
		{ Zone: "Zone3", ProductId: 11, Product: "Coke Bottle", Qty: 34284},
		{ Zone: "Zone3", ProductId: 2, Product: "Coke Can", Qty: 22856},
		{ Zone: "Zone3", ProductId: 12, Product: "Coke Can Large", Qty: 31361},
		{ Zone: "Zone3", ProductId: 15, Product: "Dasani Water", Qty: 2814},
		{ Zone: "Zone3", ProductId: 3, Product: "Diet Coke Can", Qty: 66},
		{ Zone: "Zone3", ProductId: 4, Product: "Sprite Can", Qty: 84},
		{ Zone: "Zone3", ProductId: 1, Product: "Unknown", Qty: 14285},
		{ Zone: "Zone4", ProductId: 0, Product: "Foreign", Qty: 630373},
		{ Zone: "Zone4", ProductId: 10, Product: "Cherry Coke Bottle", Qty: 11995},
		{ Zone: "Zone4", ProductId: 9, Product: "Cherry Coke Can", Qty: 157640},
		{ Zone: "Zone4", ProductId: 11, Product: "Coke Bottle", Qty: 143940},
		{ Zone: "Zone4", ProductId: 2, Product: "Coke Can", Qty: 95960},
		{ Zone: "Zone4", ProductId: 12, Product: "Coke Can Large", Qty: 127732},
		{ Zone: "Zone4", ProductId: 15, Product: "Dasani Water", Qty: 10290},
		{ Zone: "Zone4", ProductId: 3, Product: "Diet Coke Can", Qty: 4213},
		{ Zone: "Zone4", ProductId: 4, Product: "Sprite Can", Qty: 5362},
		{ Zone: "Zone4", ProductId: 1, Product: "Unknown", Qty: 59975}
	],

	impureByState: [
		{ StateId: 32, State: "CA", Impure: 3017, Total: 5993 },
		{ StateId: 1, State: "TX", Impure: 2928, Total: 5866 },
		{ StateId: 3, State: "PA", Impure: 2490, Total: 4940 },
		{ StateId: 23, State: "NY", Impure: 2479, Total: 4918 },
		{ StateId: 7, State: "IL", Impure: 1755, Total: 3501 },
		{ StateId: 24, State: "OH", Impure: 1658, Total: 3291 },
		{ StateId: 38, State: "FL", Impure: 1654, Total: 3334 },
		{ StateId: 13, State: "VA", Impure: 1375, Total: 2752 },
		{ StateId: 29, State: "MO", Impure: 1346, Total: 2687 },
		{ StateId: 12, State: "MI", Impure: 1308, Total: 2646 },
		{ StateId: 53, State: "NC", Impure: 1194, Total: 2373 },
		{ StateId: 40, State: "IA", Impure: 1174, Total: 2289 },
		{ StateId: 33, State: "MN", Impure: 1125, Total: 2303 },
		{ StateId: 6, State: "IN", Impure: 1114, Total: 2284 },
		{ StateId: 46, State: "GA", Impure: 1104, Total: 2136 },
		{ StateId: 60, State: "KY", Impure: 1070, Total: 2207 },
		{ StateId: 4, State: "WI", Impure: 1007, Total: 2025 },
		{ StateId: 55, State: "WV", Impure: 920, Total: 1871 },
		{ StateId: 2, State: "KS", Impure: 905, Total: 1728 },
		{ StateId: 52, State: "TN", Impure: 888, Total: 1770 },
		{ StateId: 42, State: "AL", Impure: 884, Total: 1861 },
		{ StateId: 36, State: "OK", Impure: 856, Total: 1745 },
		{ StateId: 30, State: "NJ", Impure: 832, Total: 1664 },
		{ StateId: 39, State: "AR", Impure: 822, Total: 1590 },
		{ StateId: 28, State: "LA", Impure: 820, Total: 1622 },
		{ StateId: 19, State: "WA", Impure: 783, Total: 1543 },
		{ StateId: 10, State: "CO", Impure: 771, Total: 1538 },
		{ StateId: 20, State: "MA", Impure: 728, Total: 1468 },
		{ StateId: 9, State: "MD", Impure: 699, Total: 1354 },
		{ StateId: 54, State: "NE", Impure: 698, Total: 1382 },
		{ StateId: 47, State: "AZ", Impure: 686, Total: 1350 },
		{ StateId: 49, State: "MS", Impure: 578, Total: 1199 },
		{ StateId: 16, State: "SC", Impure: 576, Total: 1176 },
		{ StateId: 31, State: "OR", Impure: 569, Total: 1101 },
		{ StateId: 14, State: "ME", Impure: 509, Total: 1069 },
		{ StateId: 27, State: "CT", Impure: 506, Total: 1031 },
		{ StateId: 48, State: "AE", Impure: 494, Total: 1007 },
		{ StateId: 44, State: "ND", Impure: 470, Total: 921 },
		{ StateId: 59, State: "NM", Impure: 461, Total: 943 },
		{ StateId: 26, State: "SD", Impure: 450, Total: 906 },
		{ StateId: 34, State: "MT", Impure: 439, Total: 922 },
		{ StateId: 62, State: "UT", Impure: 391, Total: 766 },
		{ StateId: 45, State: "ID", Impure: 357, Total: 723 },
		{ StateId: 41, State: "VT", Impure: 339, Total: 689 },
		{ StateId: 11, State: "DC", Impure: 337, Total: 685 },
		{ StateId: 8, State: "NH", Impure: 309, Total: 624 },
		{ StateId: 15, State: "AK", Impure: 296, Total: 605 },
		{ StateId: 21, State: "NV", Impure: 291, Total: 565 },
		{ StateId: 57, State: "AP", Impure: 224, Total: 406 },
		{ StateId: 35, State: "PR", Impure: 211, Total: 399 },
		{ StateId: 56, State: "WY", Impure: 180, Total: 401 },
		{ StateId: 58, State: "HI", Impure: 155, Total: 297 },
		{ StateId: 5, State: "DE", Impure: 115, Total: 215 },
		{ StateId: 17, State: "RI", Impure: 112, Total: 228 },
		{ StateId: 61, State: "AA", Impure: 39, Total: 99 },
		{ StateId: 25, State: "VI", Impure: 20, Total: 46 },
		{ StateId: 18, State: "GU", Impure: 19, Total: 32 },
		{ StateId: 51, State: "PW", Impure: 5, Total: 7 },
		{ StateId: 50, State: "FM", Impure: 4, Total: 6 },
		{ StateId: 22, State: "MP", Impure: 3, Total: 10 },
		{ StateId: 37, State: "MH", Impure: 2, Total: 3 },
		{ StateId: 43, State: "AS", Impure: 1, Total: 1 }
	],

	countByZone: [
		{ Zone: "Zone1", Impure: 18488, VoidShelf: 4725, Pure: 18493 },
		{ Zone: "Zone2", Impure: 10101, VoidShelf: 2489, Pure: 10024 },
		{ Zone: "Zone3", Impure: 4199, VoidShelf: 1008, Pure: 4263 },
		{ Zone: "Zone4", Impure: 14764, VoidShelf: 3678, Pure: 14781 }
	],

	trendForPurity: {
		Zone1: [
			{ Date: "10-Oct", Impure: 18554, VoidShelf: 3135, Pure: 18427 },
			{ Date: "17-Oct", Impure: 18398, VoidShelf: 3451, Pure: 18583 },
			{ Date: "24-Oct", Impure: 18358, VoidShelf: 5410, Pure: 18623 },
			{ Date: "30-Oct", Impure: 18488, VoidShelf: 4725, Pure: 18493 }
		],
		Zone2: [
			{ Date: "10-Oct", Impure: 9998, VoidShelf: 2310, Pure: 10127 },
			{ Date: "17-Oct", Impure: 9847, VoidShelf: 2910, Pure: 10258 },
			{ Date: "24-Oct", Impure: 9817, VoidShelf: 2733, Pure: 10288 },
			{ Date: "30-Oct", Impure: 9727, VoidShelf: 2489, Pure: 10378 }
		],
		Zone3: [
			{ Date: "10-Oct", Impure: 4183, VoidShelf: 1540, Pure: 4279 },
			{ Date: "17-Oct", Impure: 4297, VoidShelf: 1310, Pure: 4165 },
			{ Date: "24-Oct", Impure: 4266, VoidShelf: 1210, Pure: 4196 },
			{ Date: "30-Oct", Impure: 4199, VoidShelf: 1008, Pure: 4263 }
		],
		Zone4: [
			{ Date: "10-Oct", Impure: 15761, VoidShelf: 3241, Pure: 14246 },
			{ Date: "17-Oct", Impure: 15229, VoidShelf: 3912, Pure: 14778 },
			{ Date: "24-Oct", Impure: 14998, VoidShelf: 3801, Pure: 14547 },
			{ Date: "30-Oct", Impure: 14764, VoidShelf: 3678, Pure: 14781 }
		]
	},

	showCharts: function () {
		new FusionCharts({
			type: 'pie2d',
			renderAt: 'shelfAvailability-products',
			width: '100%',
			height: 300,
			dataFormat: "json",
			dataSource: {
				"chart": {
					"showvalues": "1",
					"theme": "fint"
				},
				"data": this.productVisibility
			}
		}).render();


		var msData = this.createMultiSeriesBySum({
			data: this.productByZone,
			categoryField: 'Zone',
			seriesIdField: 'ProductId',
			seriesNameField: 'Product',
			valueField: 'Qty'
		});

		new FusionCharts({
			type: 'mscolumn2d',
			renderAt: 'shelfAvailability-byZone',
			width: '100%',
			height: 300,
			dataFormat: "json",
			dataSource: Ext.apply({
				"chart": {
					"showvalues": "1",
					"theme": "fint"
				}
			}, msData)
		}).render();

		var impureByState = this.impureByState;

		var data = [];
		var top = 10;
		for (var i = 0, len = impureByState.length; i < len; i++) {
			var record = impureByState[i];
			if (i >= top) {
				if (data.length === top) {
					data[top] = { "label": "Others", value: 0 };
				}
				data[top].value += record.Impure;
			} else {
				data[i] = { "label": record.State, "value": record.Impure };
			}
		}

		new FusionCharts({
			type: 'pie2d',
			renderAt: 'purityAndOsa-byZone',
			width: '100%',
			height: 300,
			dataFormat: "json",
			dataSource: {
				"chart": {
					"showvalues": "1",
					"theme": "fint"
				},
				"data": data
			}
		}).render();

		var osaByZone = this.createMultiSeries({
			data: this.countByZone,
			categoryField: 'Zone',
			seriesDetails: [
				{ field: 'Pure', label: 'Pure' },
				{ field: 'Impure', label: 'Impure' },
				{ field: 'VoidShelf', label: 'Void Shelf > 30%' }
			]
		});
		new FusionCharts({
			type: 'mscolumn2d',
			renderAt: 'purityAndOsa-counts',
			width: '100%',
			height: 300,
			dataFormat: "json",
			dataSource: Ext.apply({
				"chart": {
					"showvalues": "1",
					"theme": "fint"
				}
			}, osaByZone)
		}).render();

		var zone = 'Zone1';
		var purityTrend = this.createMultiSeries({
			data: this.trendForPurity[zone],
			categoryField: 'Date',
			seriesDetails: [
				{ field: 'Pure', label: 'Pure' },
				{ field: 'Impure', label: 'Impure' },
				{ field: 'VoidShelf', label: 'Void Shelf > 30%' }
			]
		})
		new FusionCharts({
			type: 'mscolumn2d',
			renderAt: 'visitEffectiveness-purity',
			width: '100%',
			height: 300,
			dataFormat: "json",
			dataSource: Ext.apply({
				"chart": {
					"showvalues": "1",
					"theme": "fint"
				}
			}, purityTrend)
		}).render();
	},

	createMultiSeriesBySum: function (options) {

		var categories = [];
		var categoryNames = [];
		var data = options.data;
		var categoryField = options.categoryField;
		var seriesIdField = options.seriesIdField;
		var seriesNameField = options.seriesNameField || seriesIdField;
		var valueField = options.valueField;
		var dataset = [];
		var serieses = {};
		var seriesInfo = {};

		for (var index = 0, recordCount = data.length; index < recordCount; index++) {
			var record = data[index];
			var category = record[categoryField];
			if (categoryNames.indexOf(category) === -1) {
				categories.push({ label: category });
				categoryNames.push(category);
			}
		}

		for (var index = 0, recordCount = data.length; index < recordCount; index++) {
			var record = data[index];
			var seriesId = record[seriesIdField];
			var category = record[categoryField];
			seriesInfo = serieses[seriesId];
			if (!seriesInfo) {
				seriesInfo = { seriesname: record[seriesNameField], data: [] };
				for (var i = 0, len = categories.length; i < len; i++) {
					seriesInfo.data[i] = { value: 0 };
				}
				serieses[seriesId] = seriesInfo;
				dataset.push(seriesInfo);
			}
			seriesInfo.data[categoryNames.indexOf(category)].value += record[valueField];
		}

		return {
			categories: [
				{
					category: categories
				}
			],
			dataset: dataset
		};
	},

	createMultiSeries: function (options) {

		var categories = [];
		var categoryNames = [];
		var data = options.data;
		var categoryField = options.categoryField;
		var seriesDetails = options.seriesDetails;
		var dataset = [];
		var serieses = {};
		var seriesInfo = {};

		for (var index = 0, recordCount = data.length; index < recordCount; index++) {
			var record = data[index];
			var category = record[categoryField];
			if (categoryNames.indexOf(category) === -1) {
				categories.push({ label: category });
				categoryNames.push(category);
			}
		}

		for (var index = 0, recordCount = seriesDetails.length; index < recordCount; index++) {
			var seriesId = seriesDetails[index].field;
			seriesInfo = { seriesname: seriesDetails[index].label, data: [] };
			serieses[seriesId] = seriesInfo;
			dataset.push(seriesInfo);
		}

		for (var index = 0, recordCount = data.length; index < recordCount; index++) {
			var record = data[index];
			for (var seriesIndex = 0, seriesCount = seriesDetails.length; seriesIndex < seriesCount; seriesIndex++) {
				var seriesId = seriesDetails[seriesIndex].field;
				seriesInfo = serieses[seriesId];
				seriesInfo.data.push({ value: record[seriesId] });
			}
		}

		return {
			categories: [
				{
					category: categories
				}
			],
			dataset: dataset
		};
	}
};

Ext.onReady(function () {
	Dashboard.showCharts();
});